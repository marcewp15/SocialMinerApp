{% extends 'base.html' %}

{% block header %}
    <img src="{{ url_for('static', filename='images/socialminer_logo_titulo.png') }}" class="logo" alt="Logo SocialMiner">
{% endblock %}

{% block content %}
<!--Formulario de búsqueda-->
  <form action="/searcher" method="post" onsubmit="mostrarAvisos()">
    <input type="text" name="term" placeholder="Ingrese término de búsqueda" pattern="[A-Za-zÀ-ÿ\s]+]" 
    title="Solo se permiten letras y espacios" required>
    <button type="submit">Buscar</button>
  </form>

  <!--Avisos-->
  <div id="aviso-buscado" >Buscando resultados, por favor espere...</div>
  <div id="aviso-chrome" >Al momento de generar la busqueda se abrira una ventana de Chrome, por favor no la cierre. </div>

  <!--Script de avisos-->
  <script>
    function mostrarAvisos() {
      document.getElementById("aviso-buscado").style.display = "block";
      document.getElementById("aviso-chrome").style.display = "block";
    }
  </script>
  
  <!--Ventana con resultados-->
  {% if results %}
    <div class="tweet-window">
        <h2>Resultados encontrados</h2>
        <ol>
          {% for r in results %}
            <li>
              <strong>{{ r.user }}</strong> ({{ r.date }})<br>
              {{ r.text }}
            </li>
          {% endfor %}
        </ol>
    </div>
      
    <!--Botón exportar-->
    <form action="/export" method="get">
        <button type="submit">Exportar</button>
    </form>
  {% endif %}
{% endblock %}